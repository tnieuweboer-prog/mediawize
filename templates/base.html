<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ page_title or "Mediawize" }}</title>

  <link rel="stylesheet" href="/static/css/app.css">

  {# Branding variabelen (school is dict of None) #}
  {% set brand_logo = (school.get("logo_path") if school and school.get("logo_path") else "/static/assets/mediawize-logo.webp") %}
  {% set brand_name = (school.get("name") if school and school.get("name") else "Mediawize") %}
  {% set brand_primary = (school.get("primary_color") if school and school.get("primary_color") else "#22c55e") %}
  {% set brand_secondary = (school.get("secondary_color") if school and school.get("secondary_color") else "#86efac") %}

  <style>
    :root{
      --accent: {{ brand_primary }};
      --accent2: {{ brand_secondary }};
    }
  </style>
</head>

<body>

<div class="app">

  <!-- SIDEBAR -->
  <aside class="sidebar" id="sidebar">

    <div class="logo">
      <div class="logo-badge">
        <img src="{{ brand_logo }}" alt="{{ brand_name }} logo">
      </div>

      <div class="logo-text">
        <div class="logo-title">{{ brand_name }}</div>
        <div class="logo-sub">
          {% if current_user.role == "docent" %}
            Docent
          {% elif current_user.role == "leerling" %}
            Leerling
          {% else %}
            Dashboard
          {% endif %}
        </div>
      </div>
    </div>

    <nav class="nav">

      {% if current_user.role == "docent" %}
        <a href="/docent" class="{{ 'active' if active_tab == 'docent' else '' }}">
          Dashboard
        </a>

        <a href="/html" class="{{ 'active' if active_tab == 'html' else '' }}">
          DOCX → HTML
        </a>

        <a href="/workbook" class="{{ 'active' if active_tab == 'workbook' else '' }}">
          Werkboekjes
        </a>

        <a href="/docent/toetsen" class="{{ 'active' if active_tab == 'toetsen' else '' }}">
          Toetsen
        </a>
      {% endif %}

      {% if current_user.role == "leerling" %}
        <a href="/leerling" class="{{ 'active' if active_tab == 'leerling' else '' }}">
          Dashboard
        </a>

        <a href="/leerling/toets" class="{{ 'active' if active_tab == 'toets_maken' else '' }}">
          Toets maken
        </a>
      {% endif %}

      {% if current_user.is_admin %}
        <hr>
        <a href="/admin" class="{{ 'active' if active_tab == 'admin' else '' }}">
          Beheer
        </a>
      {% endif %}

      <hr>

      <a href="/logout">
        Uitloggen
      </a>

    </nav>
  </aside>

  <!-- MAIN CONTENT -->
  <main class="content">

    <!-- TOPBAR (mobiel) -->
    <div class="topbar">
      <button class="hamburger" onclick="toggleSidebar()">☰</button>
      <div class="topbar-title">{{ page_title or brand_name }}</div>
    </div>

    {% block content %}{% endblock %}

  </main>

</div>

<script>
function toggleSidebar() {
  document.getElementById("sidebar").classList.toggle("open");
}
</script>

</body>
</html>

